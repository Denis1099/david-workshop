(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{7431:(e,s,t)=>{Promise.resolve().then(t.bind(t,8487))},8487:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var r=t(5155),a=t(2115),l=t(5992),n=t(728);let c=e=>{let{title:s,value:t,icon:a,color:l,change:n}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"typo-body-small text-gray-600 mb-2",children:s}),(0,r.jsx)("p",{className:"typo-section-title text-gray-900",children:t}),n&&(0,r.jsxs)("div",{className:"flex items-center mt-2 typo-body-small ".concat((()=>{if(!n)return"";switch(n.trend){case"up":return"text-green-600";case"down":return"text-red-600";default:return"text-gray-600"}})()),children:[(0,r.jsx)("span",{className:"ml-1",children:(()=>{if(!n)return"";switch(n.trend){case"up":return"↗️";case"down":return"↘️";default:return"→"}})()}),(0,r.jsxs)("span",{children:[Math.abs(n.value),"%"]})]})]}),(0,r.jsx)("div",{className:"w-12 h-12 rounded-full ".concat(l," flex items-center justify-center"),children:(0,r.jsx)("span",{className:"text-2xl",children:a})})]})})},i=e=>{let{activities:s,loading:t}=e;return t?(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"typo-body-large font-medium text-gray-900 mb-4",children:"פעילות אחרונה"}),(0,r.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-3 animate-pulse",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gray-200 rounded-full"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,r.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},s))})]}):(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,r.jsx)("h3",{className:"typo-body-large font-medium text-gray-900 mb-4",children:"פעילות אחרונה"}),(0,r.jsx)("div",{className:"space-y-4",children:0===s.length?(0,r.jsx)("p",{className:"typo-body-regular text-gray-500 text-center py-8",children:"אין פעילות אחרונה"}):s.map(e=>(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center ".concat((e=>{switch(e){case"registration":return"bg-blue-100 text-blue-600";case"payment":return"bg-green-100 text-green-600";case"seminar":return"bg-purple-100 text-purple-600";case"newsletter":return"bg-yellow-100 text-yellow-600";default:return"bg-gray-100 text-gray-600"}})(e.type)),children:(0,r.jsx)("span",{className:"text-sm",children:(e=>{switch(e){case"registration":return"\uD83D\uDC65";case"payment":return"\uD83D\uDCB3";case"seminar":return"\uD83D\uDCC5";case"newsletter":return"\uD83D\uDCE7";default:return"\uD83D\uDCCB"}})(e.type)})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"typo-body-regular text-gray-900 mb-1",children:e.message}),(0,r.jsx)("p",{className:"typo-body-small text-gray-500",children:(e=>{let s=new Date(e),t=Math.floor((new Date().getTime()-s.getTime())/36e5),r=Math.floor(t/24);return r>0?"לפני ".concat(r," ימים"):t>0?"לפני ".concat(t," שעות"):"לפני זמן קצר"})(e.timestamp)})]})]},e.id))}),s.length>0&&(0,r.jsx)("div",{className:"mt-4 pt-4 border-t border-gray-200",children:(0,r.jsx)("button",{className:"typo-body-small text-cta hover:text-cta/80",children:"הצג עוד פעילות"})})]})};var d=t(518),o=t(2099);function u(){let e,[s,t]=(0,a.useState)(null),[u,m]=(0,a.useState)([]),[x,g]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{(async()=>{try{let[e,s]=await Promise.all([d.z.getDashboardStats(),d.z.getRecentActivity()]);t(e),m(s)}catch(e){console.error("Error fetching dashboard data:",e)}finally{g(!1)}})()},[]),(0,r.jsx)(n.A,{children:(0,r.jsx)(l.A,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"typo-page-title text-bg-primary",children:"דשבורד ראשי"}),(0,r.jsxs)("div",{className:"typo-body-regular text-gray-600",children:["עדכון אחרון: ",new Date().toLocaleTimeString("he-IL")]})]}),(0,r.jsx)("div",{className:"rounded-lg p-4 border ".concat(o.h?"bg-green-50 border-green-200 text-green-800":"bg-yellow-50 border-yellow-200 text-yellow-800"),children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(o.h?"bg-green-500":"bg-yellow-500")}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:o.h?"\uD83D\uDD17 מחובר לבסיס נתונים":"\uD83D\uDCE6 מצב נתונים מדמה"}),(0,r.jsx)("div",{className:"text-sm",children:o.h?"המערכת מחוברת לבסיס הנתונים. כל הנתונים שמוצגים הם אמיתיים.":"המערכת משתמשת בנתונים מדמים. סדנאות שנוצרות לא יישמרו ולא יוצגו לציבור."})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,r.jsx)(c,{title:"סדנאות פעילות",value:x?"...":(null==s?void 0:s.active_seminars)||0,icon:"\uD83D\uDCC5",color:"bg-blue-100",change:{value:12,trend:"up"}}),(0,r.jsx)(c,{title:"הרשמות חדשות",value:x?"...":(null==s?void 0:s.total_registrations)||0,icon:"\uD83D\uDC65",color:"bg-green-100",change:{value:8,trend:"up"}}),(0,r.jsx)(c,{title:"תשלומים ממתינים",value:x?"...":(null==s?void 0:s.pending_payments)||0,icon:"\uD83D\uDCB3",color:"bg-yellow-100",change:{value:5,trend:"down"}}),(0,r.jsx)(c,{title:"מנויי רשימת תפוצה",value:x?"...":(null==s?void 0:s.newsletter_leads)||0,icon:"\uD83D\uDCE7",color:"bg-purple-100",change:{value:15,trend:"up"}}),(0,r.jsx)(c,{title:"הכנסות החודש",value:x?"...":(e=(null==s?void 0:s.revenue_this_month)||0,new Intl.NumberFormat("he-IL",{style:"currency",currency:"ILS",minimumFractionDigits:0}).format(e)),icon:"\uD83D\uDCB0",color:"bg-green-100",change:{value:23,trend:"up"}}),(0,r.jsx)(c,{title:"סך הכל סדנאות",value:x?"...":(null==s?void 0:s.total_seminars)||0,icon:"\uD83D\uDCCA",color:"bg-indigo-100",change:{value:3,trend:"up"}})]}),(0,r.jsx)(i,{activities:u,loading:x})]})})})}}},e=>{e.O(0,[121,76,358],()=>e(e.s=7431)),_N_E=e.O()}]);