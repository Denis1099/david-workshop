"use strict";exports.id=708,exports.ids=[708],exports.modules={21708:(a,b,c)=>{c.d(b,{Y:()=>i});var d=c(16391);let e=[{id:1,city:"תל אביב",date:"2025-02-15",time_start:"10:00",time_end:"14:00",venue_name:"פיט אנד פאן",venue_address:"רחוב הברזל 32, תל אביב",max_participants:15,current_participants:12,price:480,status:"active",special_notes:void 0,payment_enabled:!0,payment_deadline:"2025-02-14",early_bird_price:420,early_bird_deadline:"2025-02-01",payment_link:"https://pages.greeninvoice.co.il/payments/links/1af96424-6067-42f6-88c1-a6c902f042e0"},{id:2,city:"חיפה",date:"2025-02-22",time_start:"10:00",time_end:"14:00",venue_name:"בולדר חיפה",venue_address:"רחוב הרצל 45, חיפה",max_participants:15,current_participants:8,price:480,status:"active",special_notes:void 0,payment_enabled:!0,payment_deadline:"2025-02-21",early_bird_price:420,early_bird_deadline:"2025-02-08"},{id:3,city:"ירושלים",date:"2025-03-01",time_start:"10:00",time_end:"14:00",venue_name:"ג'ים סנטר",venue_address:"רחוב יפו 120, ירושלים",max_participants:15,current_participants:5,price:480,status:"active",special_notes:void 0},{id:4,city:"באר שבע",date:"2025-03-08",time_start:"09:00",time_end:"13:00",venue_name:"פיטנס פלוס",venue_address:"שדרות רגר 8, באר שבע",max_participants:15,current_participants:15,price:480,status:"sold_out",special_notes:void 0},{id:5,city:"נתניה",date:"2025-03-15",time_start:"10:00",time_end:"14:00",venue_name:"אולמי כושר נתניה",venue_address:"רחוב הרצל 78, נתניה",max_participants:15,current_participants:0,price:480,status:"cancelled",special_notes:"הסדנה בוטלה בשל נסיבות בלתי צפויות"},{id:6,city:"אשדוד",date:"2025-03-22",time_start:"10:00",time_end:"14:00",venue_name:"מכון כושר אשדוד",venue_address:"רחוב הנשיא 15, אשדוד",max_participants:15,current_participants:3,price:480,status:"active",special_notes:void 0}],f=[{id:101,city:"רמת גן",date:"2025-01-15",time_start:"10:00",time_end:"14:00",venue_name:"גיבורי ספורט",venue_address:"רחוב ביאליק 25, רמת גן",max_participants:15,current_participants:15,price:450,status:"completed",special_notes:"סדנה מוצלחת עם משוב מעולה"},{id:102,city:"פתח תקווה",date:"2025-01-08",time_start:"09:00",time_end:"13:00",venue_name:"אולמי הספורט פתח תקווה",venue_address:"שדרות זאב ז'בוטינסקי 101, פתח תקווה",max_participants:15,current_participants:14,price:450,status:"completed",special_notes:void 0},{id:103,city:"רחובות",date:"2024-12-25",time_start:"10:00",time_end:"14:00",venue_name:"פיטנס אריס",venue_address:"רחוב הרצל 88, רחובות",max_participants:15,current_participants:13,price:450,status:"completed",special_notes:void 0}],g=(a=1e3)=>new Promise(b=>setTimeout(b,a));var h=c(87663);class i{static async fetchUpcomingSeminars(a){if(!d.h){await g(800);let b=e.filter(a=>"active"===a.status||"sold_out"===a.status);return a?.city&&(b=b.filter(b=>b.city===a.city)),a?.dateFrom&&(b=b.filter(b=>b.date>=a.dateFrom)),a?.dateTo&&(b=b.filter(b=>b.date<=a.dateTo)),b.sort((a,b)=>new Date(a.date).getTime()-new Date(b.date).getTime())}try{let b=d.N.from("seminars").select("*").eq("status","active").gte("date",new Date().toISOString().split("T")[0]).order("date",{ascending:!0}).order("time_start",{ascending:!0});a?.city&&(b=b.eq("city",a.city)),a?.dateFrom&&(b=b.gte("date",a.dateFrom)),a?.dateTo&&(b=b.lte("date",a.dateTo));let{data:c,error:e}=await b;if(e)throw console.error("Error fetching upcoming seminars:",e),Error("שגיאה בטעינת הסדנאות הקרובות");return c||[]}catch(a){throw console.error("Service error fetching upcoming seminars:",a),a instanceof Error?a:Error("שגיאה בטעינת הסדנאות")}}static async fetchPastSeminars(a=3){if(!d.h)return await g(500),f.sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime()).slice(0,a);try{let{data:b,error:c}=await d.N.from("seminars").select("*").eq("status","completed").order("date",{ascending:!1}).limit(a);if(c)throw console.error("Error fetching past seminars:",c),Error("שגיאה בטעינת הסדנאות שהסתיימו");return b||[]}catch(a){throw console.error("Service error fetching past seminars:",a),a instanceof Error?a:Error("שגיאה בטעינת הסדנאות")}}static async getSeminarById(a){if(!d.h)return await g(300),[...e,...f].find(b=>b.id===a)||null;try{let{data:b,error:c}=await d.N.from("seminars").select("*").eq("id",a).single();if(c){if("PGRST116"===c.code)return null;throw console.error("Error fetching seminar by ID:",c),Error("שגיאה בטעינת פרטי הסדנה")}return b}catch(a){throw console.error("Service error fetching seminar by ID:",a),a instanceof Error?a:Error("שגיאה בטעינת פרטי הסדנה")}}static async getSeminarBySlug(a){console.log("\uD83D\uDD0D SeminarsService.getSeminarBySlug: Received slug:",a);let b=(0,h.wl)(a);if(console.log("\uD83D\uDCDD SeminarsService: Parsed slug result:",b),!b)return console.log("❌ SeminarsService: Invalid slug format"),null;let{city:c,date:i}=b;if(console.log("\uD83D\uDD0D SeminarsService: Looking for seminar with city:",c,"date:",i),!d.h){console.log("\uD83D\uDCE6 SeminarsService: Using mock data (Supabase not configured)"),await g(300);let a=[...e,...f];console.log("\uD83D\uDCE6 SeminarsService: Available seminars:",a.map(a=>`${a.city} - ${a.date}`));let b=a.find(a=>a.city===c&&a.date===i);return console.log("\uD83C\uDFAF SeminarsService: Found seminar:",b?`${b.city} - ${b.date}`:"None"),b||null}try{let{data:a,error:b}=await d.N.from("seminars").select("*").eq("city",c).eq("date",i).single();if(b){if("PGRST116"===b.code)return null;throw console.error("Error fetching seminar by slug:",b),Error("שגיאה בטעינת פרטי הסדנה")}return a}catch(a){throw console.error("Service error fetching seminar by slug:",a),a instanceof Error?a:Error("שגיאה בטעינת פרטי הסדנה")}}static async getHomepageSeminars(a=3){if(!d.h){console.log("\uD83D\uDCE6 SeminarsService: Using mock data for homepage seminars (Supabase not configured)"),await g(400);let b=e.filter(a=>"active"===a.status).sort((a,b)=>new Date(a.date).getTime()-new Date(b.date).getTime()).slice(0,a);return console.log(`📦 SeminarsService: Returning ${b.length} mock seminars for homepage`),b}try{console.log("\uD83D\uDD17 SeminarsService: Fetching homepage seminars from Supabase");let{data:b,error:c}=await d.N.from("seminars").select("*").eq("status","active").gte("date",new Date().toISOString().split("T")[0]).order("date",{ascending:!0}).order("time_start",{ascending:!0}).limit(a);if(c)throw console.error("❌ SeminarsService: Error fetching homepage seminars from Supabase:",c),Error("שגיאה בטעינת הסדנאות");return console.log(`✅ SeminarsService: Successfully fetched ${b?.length||0} seminars from Supabase`),b||[]}catch(a){return console.error("❌ SeminarsService: Service error fetching homepage seminars:",a),[]}}static async getAvailableCities(){if(!d.h)return await g(200),Array.from(new Set(e.filter(a=>"active"===a.status).map(a=>a.city))).sort();try{let{data:a,error:b}=await d.N.from("seminars").select("city").eq("status","active").gte("date",new Date().toISOString().split("T")[0]);if(b)return console.error("Error fetching available cities:",b),[];let c=a?.map(a=>a.city)||[];return Array.from(new Set(c)).sort()}catch(a){return console.error("Service error fetching available cities:",a),[]}}static async updateParticipantCount(a,b){try{let{error:c}=await d.N.from("seminars").update({current_participants:b,status:b>=15?"sold_out":"active"}).eq("id",a);if(c)throw console.error("Error updating participant count:",c),Error("שגיאה בעדכון מספר המשתתפים");return!0}catch(a){throw console.error("Service error updating participant count:",a),a instanceof Error?a:Error("שגיאה בעדכון הרשמה")}}static isAvailableForRegistration(a){if("active"!==a.status||a.current_participants>=a.max_participants)return!1;let b=new Date(a.date),c=new Date;return c.setHours(0,0,0,0),b>=c}static getAvailabilityInfo(a){let b=a.max_participants-a.current_participants;return"cancelled"===a.status?{status:"cancelled",spotsLeft:0,message:"בוטל"}:"sold_out"===a.status||b<=0?{status:"sold_out",spotsLeft:0,message:"אזל המלאי"}:b<=3?{status:"almost_full",spotsLeft:b,message:`נותרו ${b} מקומות בלבד!`}:{status:"available",spotsLeft:b,message:`נותרו ${b} מקומות`}}static async fetchAllSeminars(a){if(!d.h){await g(700);let b=[...e,...f];return a?.status?.length&&(b=b.filter(b=>a.status.includes(b.status))),a?.city&&(b=b.filter(b=>b.city===a.city)),a?.dateFrom&&(b=b.filter(b=>b.date>=a.dateFrom)),a?.dateTo&&(b=b.filter(b=>b.date<=a.dateTo)),b.sort((a,b)=>new Date(b.date).getTime()-new Date(a.date).getTime())}try{let b=d.N.from("seminars").select("*").order("date",{ascending:!1});a?.status?.length&&(b=b.in("status",a.status)),a?.city&&(b=b.eq("city",a.city)),a?.dateFrom&&(b=b.gte("date",a.dateFrom)),a?.dateTo&&(b=b.lte("date",a.dateTo));let{data:c,error:e}=await b;if(e)throw console.error("Error fetching all seminars:",e),Error("שגיאה בטעינת הסדנאות");return c||[]}catch(a){throw console.error("Service error fetching all seminars:",a),a instanceof Error?a:Error("שגיאה בטעינת הסדנאות")}}static async createSeminar(a){if(!d.h){console.log("\uD83D\uDCE6 SeminarsService: Creating seminar with mock data (Supabase not configured)"),console.log("\uD83D\uDCE6 Note: This seminar will not persist and will not appear on public pages"),await g(600);let b={id:Math.max(...e.map(a=>a.id))+1,...a,created_at:new Date().toISOString()};return console.log(`📦 SeminarsService: Created mock seminar with ID ${b.id} (status: ${b.status})`),b}try{console.log("\uD83D\uDD17 SeminarsService: Creating seminar in Supabase"),console.log(`🔗 Seminar details: ${a.city}, ${a.date}, status: ${a.status}`);let{data:b,error:c}=await d.N.from("seminars").insert({...a,created_at:new Date().toISOString()}).select().single();if(c)throw console.error("❌ SeminarsService: Error creating seminar in Supabase:",c),Error("שגיאה ביצירת סדנה");return console.log(`✅ SeminarsService: Successfully created seminar with ID ${b.id} (status: ${b.status})`),"active"===b.status?console.log("✅ This seminar will appear on public pages immediately"):console.log(`⚠️ This seminar has status '${b.status}' and will not appear on public pages`),b}catch(a){throw console.error("❌ SeminarsService: Service error creating seminar:",a),a instanceof Error?a:Error("שגיאה ביצירת סדנה")}}static async updateSeminar(a,b){if(!d.h){await g(500);let c=[...e,...f].find(b=>b.id===a);if(!c)throw Error("סדנה לא נמצאה");return{...c,...b}}try{let{data:c,error:e}=await d.N.from("seminars").update(b).eq("id",a).select().single();if(e)throw console.error("Error updating seminar:",e),Error("שגיאה בעדכון סדנה");return c}catch(a){throw console.error("Service error updating seminar:",a),a instanceof Error?a:Error("שגיאה בעדכון סדנה")}}static async deleteSeminar(a){if(!d.h)return await g(400),!0;try{let{error:b}=await d.N.from("seminars").delete().eq("id",a);if(b)throw console.error("Error deleting seminar:",b),Error("שגיאה במחיקת סדנה");return!0}catch(a){throw console.error("Service error deleting seminar:",a),a instanceof Error?a:Error("שגיאה במחיקת סדנה")}}static async duplicateSeminar(a){let b=await this.getSeminarById(a);if(!b)throw Error("סדנה לא נמצאה");let c={...b,title:b.title?`${b.title} (עותק)`:void 0,status:"draft",current_participants:0};return delete c.id,delete c.created_at,this.createSeminar(c)}static getStatusLabel(a){return({active:"פעיל",draft:"טיוטה",sold_out:"אזל המלאי",cancelled:"בוטל",completed:"הושלם"})[a]||a}static getStatusColor(a){return({active:"bg-green-100 text-green-800",draft:"bg-gray-100 text-gray-800",sold_out:"bg-red-100 text-red-800",cancelled:"bg-red-100 text-red-800",completed:"bg-blue-100 text-blue-800"})[a]||"bg-gray-100 text-gray-800"}static async recordPayment(a){if(!d.h){await g(300);let b=JSON.parse(localStorage.getItem("payments")||"[]");return b.push(a),localStorage.setItem("payments",JSON.stringify(b)),!0}try{let{error:b}=await d.N.from("payments").insert({id:a.id,seminar_id:parseInt(a.seminarId),participant_name:a.participantName,participant_email:a.participantEmail,participant_phone:a.participantPhone,amount:a.amount,currency:a.currency,status:a.status,green_invoice_id:a.greenInvoiceId,invoice_number:a.invoiceNumber,payment_method:a.paymentMethod,created_at:a.createdAt,updated_at:a.updatedAt,paid_at:a.paidAt,failed_at:a.failedAt,failure_reason:a.failureReason});if(b)throw console.error("Error recording payment:",b),Error("שגיאה בשמירת פרטי התשלום");return!0}catch(a){throw console.error("Service error recording payment:",a),a instanceof Error?a:Error("שגיאה בשמירת פרטי התשלום")}}static async getSeminarPayments(a){if(!d.h)return await g(200),JSON.parse(localStorage.getItem("payments")||"[]").filter(b=>b.seminarId===a.toString());try{let{data:b,error:c}=await d.N.from("payments").select("*").eq("seminar_id",a).order("created_at",{ascending:!1});if(c)throw console.error("Error fetching seminar payments:",c),Error("שגיאה בטעינת פרטי התשלומים");return(b||[]).map(a=>({id:a.id,seminarId:a.seminar_id.toString(),participantName:a.participant_name,participantEmail:a.participant_email,participantPhone:a.participant_phone,amount:a.amount,currency:a.currency,status:a.status,greenInvoiceId:a.green_invoice_id,invoiceNumber:a.invoice_number,paymentMethod:a.payment_method,createdAt:a.created_at,updatedAt:a.updated_at,paidAt:a.paid_at,failedAt:a.failed_at,failureReason:a.failure_reason}))}catch(a){throw console.error("Service error fetching seminar payments:",a),a instanceof Error?a:Error("שגיאה בטעינת פרטי התשלומים")}}static async incrementParticipantCount(a){try{let b=await this.getSeminarById(a);if(!b)throw Error("סדנה לא נמצאה");let c=b.current_participants+1,h=c>=b.max_participants?"sold_out":"active";if(!d.h){await g(200);let b=JSON.parse(localStorage.getItem("seminars")||JSON.stringify([...e,...f])),d=b.findIndex(b=>b.id===a);return -1!==d&&(b[d].current_participants=c,b[d].status=h,localStorage.setItem("seminars",JSON.stringify(b))),!0}let{error:i}=await d.N.from("seminars").update({current_participants:c,status:h}).eq("id",a);if(i)throw console.error("Error incrementing participant count:",i),Error("שגיאה בעדכון מספר המשתתפים");return!0}catch(a){throw console.error("Service error incrementing participant count:",a),a instanceof Error?a:Error("שגיאה בעדכון מספר המשתתפים")}}static isEarlyBirdAvailable(a){return!!a.early_bird_deadline&&!!a.early_bird_price&&new Date<=new Date(a.early_bird_deadline)}static getCurrentPrice(a){return this.isEarlyBirdAvailable(a)?a.early_bird_price:a.price}static isPaymentDeadlinePassed(a){return!!a.payment_deadline&&new Date>new Date(a.payment_deadline)}static async getPaymentSummary(a){try{return(await this.getSeminarPayments(a)).reduce((a,b)=>("completed"===b.status?(a.totalPaid+=b.amount,a.participantCount++):"pending"===b.status||"processing"===b.status?a.totalPending+=b.amount:"failed"===b.status&&(a.totalFailed+=b.amount),a),{totalPaid:0,totalPending:0,totalFailed:0,participantCount:0})}catch(a){return console.error("Error getting payment summary:",a),{totalPaid:0,totalPending:0,totalFailed:0,participantCount:0}}}}},87663:(a,b,c)=>{c.d(b,{Ar:()=>h,_H:()=>f,wl:()=>g});let d={"תל אביב":"tel-aviv",ירושלים:"jerusalem",חיפה:"haifa","באר שבע":"beer-sheva",אשדוד:"ashdod",נתניה:"netanya","פתח תקווה":"petah-tikva","ראשון לציון":"rishon-lezion",רחובות:"rehovot",אשקלון:"ashkelon",חולון:"holon","רמת גן":"ramat-gan","בת ים":"bat-yam","כפר סבא":"kfar-saba",הרצליה:"herzliya","רמת השרון":"ramat-hasharon",רעננה:"raanana",גבעתיים:"givatayim","ראש העין":"rosh-haayin","קריית גת":"kiryat-gat"},e=Object.fromEntries(Object.entries(d).map(([a,b])=>[b,a]));function f(a){let b=d[a.city]||a.city.toLowerCase().replace(/[^\u0590-\u05FF\w\s-]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").trim(),c=a.date;return`${b}-${c}`}function g(a){try{if(a.length<12)return null;let b=a.slice(-10),c=a.slice(0,-11);if(!/^\d{4}-\d{2}-\d{2}$/.test(b))return null;let d=new Date(b);if(isNaN(d.getTime())||d.toISOString().slice(0,10)!==b)return null;return{city:e[c]||c,date:b}}catch(a){return null}}function h(a){let b=new Date(a.date).toLocaleDateString("he-IL",{day:"numeric",month:"long",year:"numeric"});return`סדנת הרמת משקולות אולימפית - ${a.city} ${b} | דוד ליטבינוב`}}};